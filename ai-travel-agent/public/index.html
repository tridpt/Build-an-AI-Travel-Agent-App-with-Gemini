<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Travel Agent - Trợ lý Du lịch Thông minh</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <div class="language-switcher">
            <button onclick="switchLanguage('vi')" class="lang-btn active" id="lang-vi">VI</button>
            <button onclick="switchLanguage('en')" class="lang-btn" id="lang-en">EN</button>
        </div>

        <h1 data-i18n="title">🌍 AI Travel Agent</h1>
        <p class="subtitle" data-i18n="subtitle">Trợ lý du lịch thông minh với Google Gemini</p>
        
        <div class="tab-container">
            <button class="tab-button active" data-tab="form">
                <span data-i18n="tabPlan">📋 Lên Kế Hoạch</span>
            </button>
            <button class="tab-button" data-tab="chat">
                <span data-i18n="tabChat">💬 Chat Tự Do</span>
            </button>
            <a href="/currency.html" class="tab-button" data-i18n="tabCurrency">
                <span>💱 Chuyển đổi tiền tệ</span>
            </a>
            <a href="/flight.html" class="tab-button">
                <span>✈️ Tìm chuyến bay</span>
            </a>
        </div>

        <div id="formTab" class="tab-content active">
            <div class="travel-form">
                <h2 data-i18n="formTitle">🎯 Thông tin chuyến đi của bạn</h2>
                
                <div class="form-group">
                    <label for="startLocation" data-i18n="startLocation">🛫 Nơi bắt đầu?</label>
                    <input type="text" id="startLocation" data-i18n="startLocationPlaceholder" placeholder="Ví dụ: Hà Nội, TP.HCM..." required>
                </div>

                <div class="form-group">
                    <label for="destination" data-i18n="destination">📍 Bạn muốn đi đâu?</label>
                    <input type="text" id="destination" data-i18n="destinationPlaceholder" placeholder="Ví dụ: Đà Lạt, Phú Quốc, Tokyo..." required>
                    <small data-i18n="destinationHint">Có thể để trống nếu muốn AI gợi ý</small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="startDate" data-i18n="startDate">📅 Ngày bắt đầu</label>
                        <input type="date" id="startDate" required>
                    </div>
                    <div class="form-group">
                        <label for="endDate" data-i18n="endDate">📅 Ngày kết thúc</label>
                        <input type="date" id="endDate" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="budget">💰 Ngân sách</label>
                        <div class="budget-input-group">
                            <input type="number" id="budget" data-i18n="budgetPlaceholder" placeholder="Ví dụ: 5000000" min="0" step="100000" required>
                            <select id="budgetCurrency">
                                <option value="VND">VNĐ</option>
                                <option value="USD">USD</option>
                                <option value="EUR">EUR</option>
                                <option value="JPY">JPY</option>
                            </select>
                        </div>
                        <small id="budgetDisplay">0 VNĐ</small>
                    </div>
                    <div class="form-group">
                        <label for="travelers" data-i18n="travelers">👥 Số người đi</label>
                        <input type="number" id="travelers" data-i18n="travelersPlaceholder" placeholder="Số người" min="1" max="20" value="1" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="travelStyle" data-i18n="travelStyle">🎨 Phong cách du lịch</label>
                    <select id="travelStyle" required>
                        <option value="" data-i18n="selectStyle">-- Chọn phong cách --</option>
                        <option value="budget" data-i18n="styleBudget">🎒 Tiết kiệm (Backpacker)</option>
                        <option value="comfort" data-i18n="styleComfort">🏨 Thoải mái (Khách sạn 3-4 sao)</option>
                        <option value="luxury" data-i18n="styleLuxury">✨ Cao cấp (Resort 5 sao)</option>
                        <option value="adventure" data-i18n="styleAdventure">🏔️ Phiêu lưu, Mạo hiểm</option>
                        <option value="relax" data-i18n="styleRelax">🏖️ Nghỉ dưỡng</option>
                        <option value="culture" data-i18n="styleCulture">🏛️ Văn hóa, Lịch sử</option>
                        <option value="food" data-i18n="styleFood">🍜 Ẩm thực</option>
                    </select>
                </div>

                <div class="form-group">
                    <label data-i18n="interests">❤️ Sở thích (chọn nhiều)</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" value="beach"> <span>🏖️ Biển</span></label>
                        <label><input type="checkbox" value="mountain"> <span>⛰️ Núi</span></label>
                        <label><input type="checkbox" value="city"> <span>🏙️ Thành phố</span></label>
                        <label><input type="checkbox" value="nature"> <span>🌿 Thiên nhiên</span></label>
                        <label><input type="checkbox" value="shopping"> <span>🛍️ Mua sắm</span></label>
                        <label><input type="checkbox" value="food"> <span>🍽️ Ẩm thực</span></label>
                        <label><input type="checkbox" value="nightlife"> <span>🌃 Nightlife</span></label>
                        <label><input type="checkbox" value="history"> <span>🏛️ Lịch sử</span></label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="mustVisitPlaces" data-i18n="mustVisitPlacesLabel">📍 Địa điểm muốn ghé thăm</label>
                    <textarea id="mustVisitPlaces" rows="3" data-i18n="mustVisitPlacesPlaceholder" placeholder="Liệt kê các địa điểm bạn không muốn bỏ lỡ, cách nhau bằng dấu phẩy..."></textarea>
                </div>

                <div class="form-group">
                    <label for="transportation" data-i18n="transportation">🚗 Phương tiện di chuyển</label>
                    <select id="transportation">
                        <option value="" data-i18n="selectTransport">-- Chọn phương tiện --</option>
                        <option value="plane" data-i18n="transportPlane">✈️ Máy bay</option>
                        <option value="bus" data-i18n="transportBus">🚌 Xe khách</option>
                        <option value="train" data-i18n="transportTrain">🚄 Tàu hỏa</option>
                        <option value="car" data-i18n="transportCar">🚗 Xe ô tô (tự lái)</option>
                        <option value="motorbike" data-i18n="transportMotorbike">🏍️ Xe máy</option>
                        <option value="any" data-i18n="transportAny">🤷 Tùy ý</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="additionalInfo" data-i18n="additionalInfo">📝 Yêu cầu khác (tùy chọn)</label>
                    <textarea id="additionalInfo" rows="3" data-i18n="additionalPlaceholder" placeholder="Ví dụ: Muốn ở homestay, thích chụp ảnh, đi cùng trẻ em..."></textarea>
                </div>

                <button id="generatePlanButton" class="generate-button" data-i18n="generateButton">
                    ✨ Tạo Lịch Trình Du Lịch
                </button>
            </div>

            <div id="planResult" class="plan-result" style="display: none;">
                <div class="weather-section" style="margin-bottom: 25px;">
                    <div id="weather-current-container"></div>
                    <div id="weather-forecast-container"></div>
                </div>
                <div class="result-header">
                    <h2 data-i18n="resultTitle">🎉 Lịch trình của bạn</h2>
                    <div class="result-actions">
                        <div class="export-dropdown">
                            <button class="export-button" id="exportButton">
                                📥 <span data-i18n="exportButton">Xuất File</span> ▼
                            </button>
                            <div class="export-menu" id="exportMenu">
                                <button onclick="tripExporter.exportToPDF()">📄 PDF</button>
                                <button onclick="tripExporter.exportToHTML()">🌐 HTML</button>
                                <button onclick="tripExporter.exportToMarkdown()">📝 Markdown</button>
                                <button onclick="tripExporter.exportToText()">📃 Text</button>
                            </div>
                        </div>

                        <div class="share-dropdown">
                            <button class="share-button" id="shareButton">
                                📤 <span data-i18n="shareButton">Chia sẻ</span> ▼
                            </button>
                            <div class="share-menu" id="shareMenu">
                                <button onclick="shareHandler.share('facebook')">Facebook</button>
                                <button onclick="shareHandler.share('twitter')">Twitter</button>
                                <button onclick="shareHandler.share('telegram')">Telegram</button>
                                <button onclick="shareHandler.share('email')">Email</button>
                            </div>
                        </div>

                        <button id="editPlanButton" class="edit-button" data-i18n="editButton">✏️ Chỉnh sửa</button>
                    </div>
                </div>
                <div id="planContent" class="plan-content"></div>
            </div>
        </div>

        <div id="chatTab" class="tab-content">
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages"></div>
                <div class="input-container">
                    <input type="file" id="imageInput" accept="image/*" style="display: none;">
                    <button id="attachButton" class="attach-button">📎</button>
                    <textarea id="userInput" data-i18n="chatPlaceholder" placeholder="Hỏi gì đó về du lịch..." rows="2"></textarea>
                    <button id="sendButton" data-i18n="sendButton">Gửi</button>
                </div>
                <div id="imagePreviewContainer" class="image-preview-container" style="display: none;">
                    <img id="imagePreview" src="#" alt="Image preview"/>
                    <button id="removeImageButton" class="remove-image-button">×</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="js/translations.js"></script>
    <script src="js/exportHandler.js"></script>
    <script src="js/shareHandler.js"></script> <script src="js/main.js"></script>
    <script src="js/weatherHandler.js"></script>
    <script src="js/formHandler.js"></script>
</body>
</html>